<!DOCTYPE html>
<html metal:use-macro="main_template">

  <div metal:fill-slot="main_content" class="container">

    <div class="row" style="padding-bottom: 10px;">
      <div class="col-md-12">
        <button id="play-me" style="width: 8em;" class="btn btn-primary"><i
              class="fas fa-bullhorn"> </i> Listen</button>
        <button id="remix-me" style="width: 8em; display: ${already and 'none' or 'inline'};" class="btn btn-danger"><i
              class="fas fa-microphone"> </i> Remix</button>
        <button id="reverse" style="width: 8em; display: none" class="btn btn-warning audiocontrol"><i
              class="fas fa-backward"> </i></button>
        <button id="forward" style="width: 8em; display: none" class="btn btn-warning audiocontrol"><i
              class="fas fa-forward"> </i></button>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">

        <div class="panel panel-warning">
          <div class="panel-heading">
            <h3 class="panel-title">Sound</h3>
          </div>
          <div class="panel-body">

            <div>
              <span style="padding-right: 10px;"><b>Effects</b></span>
              <span class="form-check">
                <input class="form-check-input effects" type="checkbox" value="" id="effect-reverb" name="effect-reverb" tal:attributes="checked 'effect-reverb' in effects">
                <label class="form-check-label" for="effect-reverb">
                  Reverb
                </label>
              </span>
              <span class="form-check">
                <input class="form-check-input effects" type="checkbox" value="" id="effect-chorus" name="effect-chorus" tal:attributes="checked 'effect-chorus' in effects">
                <label class="form-check-label" for="effect-chorus">
                  Chorus
                </label>
              </span>
            </div>
            <div>
              <input id="musicvolume" name="musicvolume" type="range" min="0" max="1" value="${musicvolume}"
                     step="0.01"/>
              <label class="form-check-label" for="musicvolume">
                  Relative Music Volume
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">

        <div class="panel panel-warning">
          <div class="panel-heading">
            <h3 class="panel-title">Video</h3>
          </div>
          <div class="panel-body">

            <div>
              <span class="form-check">
                <input class="form-check-input effects" type="checkbox" value="" id="show-camera" name="show-camera" tal:attributes="checked context.show_camera">
                <label class="form-check-label" for="show-camera">
                  Show Camera Video
                </label>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">

        <div class="panel panel-warning">
          <div class="panel-heading">
            <h3 class="panel-title">Mic Latency (ms)</h3>
          </div>
          <div class="panel-body">

            <div>
              <span class="form-check">
                <input type="number" id="latency" min="-5" max="5" step="0.1" value="${context.latency}" size="6">
                <label class="form-check-label" for="latency">
                  Adjust if mic vocals are out of sync with backing track music.
                </label>
              </span>
              <div style="padding-top: 5px;">
               Protip: Your camera video will always be in sync with your microphone audio.  But it's common that your mic audio will be out of sync with the backing track.  If your mic audio is out of sync with the backing track, you will need to adjust the mic latency, remix, and relisten repeatedly to get it just right.  But remixing takes much longer if you leave "Show Camera Video" checked.  To make remixes faster, turn off "Show Camera Video" in remixes while you're adjusting the mic latency.  After a few remixes, the mic vocals will line up with the backing track.  After that, if you want to show video in the recording, turn "Show Camera Video" back on and remix one last time.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div metal:fill-slot="tail">
    <script type="text/javascript" src="${layout.static('yss.recordings:static/yssmixer.js')}"></script>
    <script type="text/javascript">
     // exported by yssmixer
     yssmixer("${stream_url}", "${submit_handler}")
    </script>
  </div>

</html>
